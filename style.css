const nameInput = document.getElementById("nameInput");
const msgInput = document.getElementById("msgInput");
const cardName = document.getElementById("cardName");
const cardMessage = document.getElementById("cardMessage");

/* Live preview */
nameInput.addEventListener("input", () => {
  cardName.textContent = nameInput.value || "Merry Christmas ðŸŽ„";
});

msgInput.addEventListener("input", () => {
  cardMessage.textContent =
    msgInput.value || "May this Christmas bring peace, love, and joy.";
});

/* WhatsApp */
function shareWhatsApp() {
  const text = `ðŸŽ„ Merry Christmas!\n${location.href}`;
  window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, "_blank");
}

/* Instagram */
function shareInstagram() {
  navigator.clipboard.writeText(location.href);
  alert("Link copied. Paste it in Instagram DM, bio, or story.");
}

/* Download card */
function downloadCard() {
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  const img = new Image();
  img.src = "how-old-is-santa-claus.jpg";

  img.onload = () => {
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.drawImage(img, 0, 0, canvas.width, 720);

    ctx.fillStyle = "#2b2b2b";
    ctx.textAlign = "center";
    ctx.font = "bold 64px Georgia";
    ctx.fillText(cardName.textContent, canvas.width / 2, 860);

    ctx.font = "44px Georgia";
    ctx.fillText(cardMessage.textContent, canvas.width / 2, 940);

    const a = document.createElement("a");
    a.download = "christmas-card.png";
    a.href = canvas.toDataURL();
    a.click();
  };
}
